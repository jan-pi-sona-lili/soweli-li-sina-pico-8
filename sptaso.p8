pico-8 cartridge // http://www.pico-8.com
version 29
__lua__
function w(n)for x=1,n do flip()end end
lc=-1q=16a=add m=mget

lv1={23,4,4,29,1,1}

lv2={}

baba={psh=0,kl=0,slp=0,mlt=0,
snk=0,win=0,stp=0,ht=0,u=1,mv=0,
id=23}

stone={psh=0,kl=0,slp=0,mlt=0,
snk=0,win=0,stp=1,ht=0,u=0,mv=0,
id=29}

asdf={baba,stone}

function gtmap()
	lv2={}
	if lc<8 then
		for o=lc*q,(lc+1)*q do
		 for p=0,15 do
		 	a(lv2,m(o,p))
		 	a(lv2,0)a(lv2,0)
		 end
		end
	else
		for o=lc*q,(lc+1)*q do
		 for p=16,32 do
				a(lv2,m(o,p))
				a(lv2,0)a(lv2,0)
		 end
		end
	end
	corr()	
end

function corr()
	for x=0,255 do 
		lv2[x*3-1]=x\q
		lv2[x*3]=x%q
	end
	lv1=lv2
end

function you()
 for x=1,#asdf do
		w(2)
		cls()
		for g=1,#lv1,3 do
 	 spr(lv1[g],lv1[g+1]*8,lv1[g+2]*8)
			--mset(lv1[g+1],lv1[g+2],lv1[g])
			--map(0,48,0,0,16,16)
		end
		local c=asdf[x].u
		local b=asdf[x].id
		if c and btn(➡️) then
			for y=1,#lv1,3 do
				if(lv1[y]==b and c==1and lv1[y+1]<15)lv1[y+1]+=1
			end
		end
		if c and btn(⬅️) then
			for y=1,#lv1,3 do
				if(lv1[y]==b and c==1and lv1[y+1]>0)lv1[y+1]-=1
			end
		end
		if c and btn(⬆️) then
			for y=1,#lv1,3 do
				if(lv1[y]==b and c==1and lv1[y+2]>0)lv1[y+2]-=1
			end
		end
		if c and btn(⬇️) then
			for y=1,#lv1,3 do
				if(lv1[y]==b and c==1and lv1[y+2]<15)lv1[y+2]+=1
			end
		end
	end
end

function _update()
	local gh=lc
	if(btn(❎))lc+=1w(1)
	if(gh!=lc)gtmap()
	you()
end

__gfx__
0000000004444440022222200cccccc00cccccc0011111100aaaaaa003333330099999900eeeeee00bbbbbb00000000000000000007777000000000070000070
000000004444444422000022ccc0ccccc000000c11111111aa000aaa3333033399909999eee0eeeebbbbbbbb0110000000000000070000705555000007000700
000000004444444420222202ccc0ccccc0c0cc0c11011101aaa0aaaa3330303399909999ee0eeeeebbb0bbbb10010010000c0000000000070005000000707000
000000004444004420022002cc000cccc0cc0c0c11011101aaa0aaaa3330303390909099ee0eeeeebb0b0bbb000011000c0c0c00000070770005000000070000
000000004040440420200202c0c0c0ccc0c0cc0c11000001aaa0aaaa3303330390909099ee00eeeeb0bbb0bb0000000000ccc000000000070005050000707000
000000004400440420222202ccc0ccccc0cc0c0c11111111aaa0aaaa3333333399999999ee0e0eeeb00bb00b011000000c0c0c00707070700005000007000700
000000004444444422000022ccc0ccccc000000c11110111aa000aaa3333333399909999eee0eeeebbbbbbbb10010010000c0000707070700005000070000070
0000000004444440022222200cccccc00cccccc0011111100aaaaaa003333330099999900eeeeee00bbbbbb00000110000000000707070705555000000000000
0000909000888800000000000aaaaaaa000000000ee00ee00000000000000000055555509099909900888000000000000a0aa00a004444000ee00ee000000000
0009090908000080000003000a00000a00044400e00ee00e0070000007777770555555550909090908080800000000000aaaaaaa04040440eeeeeeee00000000
0990000908000080003030300a00000a00400040e000000e0007000077777777555555559990999000888000000000000aaaaaaa44444404eeeeeeee22222220
9000009008000080030303000a00000a04000004e000000e0000700077777707555555559099909908888800000500000aaaaaaa40404404eeeeeeee20020020
0900000908000080003300000a00000a04000004e000000e0000070077770777555555550909090980888080030500000aa00aa044404444eeeeeeee20020020
0900900900888800000300000a00000a004000400e0000e00000700077777777555555559990999000888000030503000a000000404444040eeeeee020020020
0909099008000080000300000aaaaaaa0004040000e00e000007000070700707555555559099909900808000000000000a0000000444044000eeee0020020020
0090000080000008000300000a00a00a00004000000ee0000070000070700707055555500909090900808000000000000a00000000444400000ee00000000000
02222220cc0c0cc01011101100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
22222222c000000c0101010100000000000000000000000000000000000000000000000000000000005000000000050000000000000000000000000000000000
20022002c0c00c0c1110111000000000000000000000000000000000000000000000000000000000005000500003030000000000000000000000000000000000
22222222cc00c0001011101100000000000000000000000000000000000000000000000000000000005030300000000000000000000000000000000000000000
22222222c00c000c0101010100000000000000000000000000000000000000000000000000000000000000003050000000000000000000000000000000000000
22222222c0000c0c1110111000000000000000000000000000000000000000000000000000000000000000005030000000000000000000000000000000000000
02020202c000c0001011101100000000000000000000000000000000000000000000000000000000305000000000000000000000000000000000000000000000
020202020ccccc0c0101010100000000000000000000000000000000000000000000000000000000305000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000101000000000000000000000000000001010000000000000013160600000000010d0e0b1818181818181818181800000101000000000000000000000000000001141f131d0000002000000000000000010100000000000e1607000000000000010100000000170000001f160200000001
00000000001b00000000000000000000000000181818181818181818181b00000000000000000018181818180000000016161618180000000000000018001b0000001d00001b2b0000000000000000001616161d0000002000000000000000000000000000000000000000000000000000000000000000000000000000000000
1b00000000000000000000001b2b000000000018000000000000000018002a000000002a1b000018000000180000000009070518180000141601000018001b2b000000000000000000000000000000000702061d181818201818181818180000000000000000000000000000000000000000000000000000000000000000000e
2a0000001b000000001b00002a000000002a00180000000000000000180000000000000000000018001c0018001b0000181818181800000000000000180000001818181818000000191919191900000e1d1d1d1d1800002000000000001800000000000000000000180000000000000000000000000000000000000000000016
00000000000000000000000000000000000000180000000000060000180000002a00000000000018000000180000000000002b00180017001d1d00001800002b180000001800000019000000190000160000000018000020000000000018000000000d1609000000001800000000000000000000000000000000000000000007
00000d1609000e160700000000000000181818180016000000000000181b00001b00000018181818181818181818180000002a00180000000000000018000000180000001d00000019001c001900000700002a001800002000001c00001800000000000000000000180000000000000000000000000d00000000002020062020
00000000000000000000000000000000180000000000000000000000180000000000000018000000000000000000182a001818181818222222222218181818181800000018000000190000001900000000000000180000200000000000180000000000000000000000180018000000000000000000160000000000201a1b2b2b
000018181818181818180000000000001800130000000017001c00001800000000000000180000000000000000001800001800000000000000000000000000181818181818000000191919191900002b00001818180000202020202020202020000000000000001800001800180000000000000000090000000000201b182b2a
00000000001d0000000000001b000000180000000000000000000000182b0000000000001800000e160700000000182a001800000000000000000000000000180d16090000000000000000000000000000001800000000000000000000180000000000000000001800130006000000000000000000000000000000201b2a2a2a
00001700001d00001c0000000000000018181818181818181818181818000000000000001800000000000000000018001b1800000000000000000000000000180000000000000000000000000000001300001800000000000000000000180000000000000000001800001800000000000000000000000000000000202a2a2a2a
1b000000001d00000000000000000000000000000000000000000000000000002a00000018000000000000000000180000182222220000000000000000000018000000001b2a000000001d000000001600001800170000000e16070000180000000000000018000018000000000000000000000000000000000000201b1b2a2a
0000181818181818181800000000000000000000001b2a000000002b2a00000000001b00180000000017000000001800001822222200000000000013160600181d0000000000000000000000000000060000180000000000000000000018002b000000000000000000000000000000000000000000000000000000201b2a2a1b
00000000000000000000001b00000000000d1609000000000e1607000000000000002a001800000000000000000018001b181c222200000000000000000000180000000000141601000000000000000000001818181818181818181818180000000000000000000000000000000000000000000000000000000000201b1b2b2b
0000141601001316060000000000000000000000000000000000000000000000002b2b0018181818181818181818181b001818181818181818181818181818180000000000000000000000000000000000000d160900000000000000000000000000000000000000000000000000000000000000000011160a0000202b2b2b2b
001b0000000000000000000000000000001b000000002a1b0000000000000000000000000d1609000000001b000000000000000000000000000000000000000000000000002a0000000000001b0000000000000000000000001b2a0000000000000000000000000000000000000000000000000000000000000000202b2b1b1b
01000000000000000000002a2b0000010100000000000000000000000000000101000000000000000000002b00000001010000000000000000000000000000010110160200000000000000000000000101000000000000000000000000000001010000000000000000000000000000010100000000000000000000201b2b1b01
010000000000000000000000000000010118180000000000000000000018180101000e160700000010160200000000010100000013160600000000000000000101101608000000190000000000000001011b1b1b1b1b1b1b1b2b2b1b2a1b1b010000000000000000000000000000000000000000000000000000000000000000
00000000001818181818181818180000181818000f1600000000000000181818000000000000000000000000000000000000000000000000000000000000000000000000000000190000000f0000000b1b1b2a2a1b1b061b1b2b2a2a2b2b1b1b0000000000000000000000000000000000000000000000000000000000000000
0000000000181700000000000018000018181800000000181818180000181818000000000000001a000000000000000000000000000000000018181818180000000000000000001900000000000000161b1b2a2b2b2b1b1b2b1b1a1b1b2a2a1b0000000000000000000000000000000000000000000000000000000000000000
00000000001800002000000e00180000000000000000001800001800000000000000000000000000000000000000000000000000000000000018000000180000000000000000001900000000000000051b1b2b1b2b2b1b2b2b1b1b1b1b2a1b1b0000000000000000000000000000000000000000000000000000000000000000
000000000018202020000016001800000000000000000018001c18000000000e001a00000000181818150000001a000000000000000000000018001c00180000000000000000001900000000000000001b1b1b2a2a2a2a2a2b2a2a2a2a2a1b110000000000000000000000000000000000000000000000000000000000000000
0000000000180000000000020018000000000000000000180000180000000016000000000000181e1816000000000000000000000000000000180000001800000e000000000000190000001a0018000d1b1b2a2a1b1b1b2a1b1b1b2a2a1b1b160000000000000000000000000000000000000000000000000000000000000000
00000000001800000000000000180000000000000000002121212100000000070000000000001800180600000000000000000000000000000018181818180000160000000000001900000000000000161b1b2a1b1b1b1b1b1b1b1b2a1b1b1b040000000000000000000000000000000000000000000000000000000000000000
000000000018001f16070000001800000000000000000021212121000000000000000000001a1819181800000000000000000000000000000000000000000000070000170000001900000000000000041b1b1b2b2b2b2b2b2b1b1b1b1b1b1b1b0000000000000000000000000000000000000000000000000000000000000000
000000000018000000000000001800000000001700000021212121000000000000000000000000000000000000000000000000000000000000000000000000000000000d1609001900000000000000001b1b1b1b1b1b1b1b1b1b2b2b2b1b1b0d0000000000000000000000000000000000000000000000000000000000000000
0000000000181818181818181818000000000d160900001818181800000000000000000000000000000000000000000000001200000000000000000000000000000000000000001900111601000000001b1b1b1b1b1b1b1b171b1b1b1b1b1b160000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000c1603180000000000000000170000000000000000000000000000160000000f00000000000000000e000000000000001900000000000000001b1b0f1b1b111b1b1b1b2a2a2a1b1b080000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000800000000000000000000000016000000000000001900000022222222222a1b161b1b161b2b2b2b2b2b2b1b1b1b0000000000000000000000000000000000000000000000000000000000000000
000000131606000000000000000000000000000000000000000000000000000000000d1609000000000011160a00000000000000000000000000000000000007000000000000001900000022000000002a1b0d16091b2b1b1b1b1b1b1b1b1b1b0000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000181818000000000000000000001818180000000000000000000000000000000000000000000000000000000000000000000000000000001900000022000000002a1b1b1b1b1b2b2b2b2a2a2a2a2a2a1b0000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000181818000000000000000000001818180000000000000000000000000000000000000000000000000000000000000000000000000000001900000022000000001b1b2b2b2b2b2b2a2b2b2a1b1b1b1b1b0000000000000000000000000000000000000000000000000000000000000000
01000e16070000000d16090000000001011818001316060000000000001818010100000000000000000000000000000101000d1609000000000000000000000101000000000000190000002200000006011b2b1b1b1b1b1b1b1b1b1b1b1b1b010000000000000000000000000000000000000000000000000000000000000000
